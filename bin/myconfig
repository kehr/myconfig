#!/usr/bin/env bash
set -Eeuo pipefail
# Ensure execution in project root
if [[ -f "./config/config.toml" && -d "./src" ]]; then
  PROJECT_ROOT="$(pwd)"
else
  PROJECT_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
  cd "$PROJECT_ROOT"
fi
PY="$(command -v python3 || command -v python || true)"
if [[ -z "$PY" ]]; then
  echo "âœ– python3/python not found, please install first (brew install python)" >&2; exit 1
fi
# Run CLI with source tree on PYTHONPATH so absolute imports (core, actions, etc.) resolve
export PYTHONPATH="$PROJECT_ROOT/src:${PYTHONPATH:-}"
exec "$PY" -m src "$@"
