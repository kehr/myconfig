#!/usr/bin/env bash
set -Eeuo pipefail
# 确保在项目根执行
if [[ -f "./config/config.toml" && -d "./src" ]]; then
  PROJECT_ROOT="$(pwd)"
else
  PROJECT_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
  cd "$PROJECT_ROOT"
fi
PY="$(command -v python3 || command -v python || true)"
if [[ -z "$PY" ]]; then
  echo "✖ 未找到 python3/python，请先安装（brew install python）" >&2; exit 1
fi
exec "$PY" -m src "$@"
